env:
    class: Component::Env

db:
    class: Component::DB
    args:
        env:
            $ref: env

node:
    class: Component::BitcoinNode
    args:
        env:
            $ref: env

master_key:
    class: Component::MasterKey
    args:
        env:
            $ref: env

requests_repository:
    class: Repository::Request
    args:
        db:
            $ref: db

accounts_repository:
    class: Repository::Account
    args:
        db:
            $ref: db

# services

address_service:
    class: Services::AddressService
    args:
        account_repo:
            $ref: accounts_repository
        master_key:
            $ref: master_key
        node:
            $ref: node

request_watcher:
    class: Services::RequestWatcher
    args:
        address_service:
            $ref: address_service
        request_repo:
            $ref: requests_repository
        account_repo:
            $ref: accounts_repository
